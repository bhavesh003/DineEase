<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="global.css" />
    <link rel="stylesheet" href="Cart.css" />
    <link rel="stylesheet" href="">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100;0,400;0,600;0,700;1,600&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" />
</head>

<body>
    <div class="cart">

        <div class="cart2">Order History</div>
        <img class="back-icon" alt="" id="back-icon" src="public/chevronleft.svg" />
        
        <table class="history-table" id="history-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div class="tp">
            <p>Total Price: <span class="total-price"></span></p>
        </div>
    </div>

    <script>
        var dish = document.getElementById("back-icon");
        if (dish) {
            dish.addEventListener("click", function (e) {
                window.location.href = "Cart.html";
            });
        }
        // Add the item to the cart history
        // Get the cart items from local storage
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

        // Get the table body element
        const tableBody = document.querySelector('#history-table tbody');
        const totalPriceElement = document.querySelector('.total-price');

        // Loop through the cart items and render them in the table
        let totalPrice = 0;
        cartItems.forEach(item => {
            const row = document.createElement('tr');
            const nameCell = document.createElement('td');
            nameCell.textContent = item.name;
            const priceCell = document.createElement('td');
            priceCell.textContent = item.price;
            row.appendChild(nameCell);
            row.appendChild(priceCell);
            tableBody.appendChild(row);

            let itemPrice = parseInt(item.price.slice(3));
            totalPrice += itemPrice;
        });

        // Set the total price as text content
        totalPriceElement.textContent = 'Rs ' + totalPrice;

    </script>

</body>

</html>