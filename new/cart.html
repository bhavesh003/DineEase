<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cart.css">

    <title>Document</title>
</head>

<body>
    <h1>Cart</h1>

    <div id="cart-items">
    </div>

    <button class="clear-cart">Clear Cart</button>

    <script>
        const cartItemsContainer = document.getElementById('cart-items');

        // Render the cart items
        function renderCartItems() {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItemsContainer.innerHTML = '';

            cartItems.forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.innerHTML = `
                <div class="dish" id="dish2">
                    <div class="dish-details">
                      <img class="dish-icon" alt="" src="fooditems/homepage/Punjabi Thali.jpeg" />
                      <div class="dish-name">Punjabi Thali</div>
                      <b class="dish-price">Rs 280</b>
                    </div>
                    <button class="cart-child">Add</button>
                  </div>
          `;
                cartItemsContainer.appendChild(cartItem);
            });

            // Remove the old event listeners before attaching new ones
            const removeItemButtons = document.querySelectorAll('.remove-item');
            removeItemButtons.forEach(removeItemButton => {
                const index = removeItemButton.getAttribute('data-index');
                removeItemButton.removeEventListener('click', removeCartItem);
                removeItemButton.addEventListener('click', () => removeCartItem(index));
            });
        }

        // Remove the item at the specified index from the cart and re-render the cart items
        function removeCartItem(index) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.splice(index, 1);
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            renderCartItems();
        }

        // Add a click event listener to the "Clear Cart" button
        const clearCartButton = document.querySelector('.clear-cart');
        clearCartButton.addEventListener('click', () => {
            // Clear the cart items from local storage
            localStorage.removeItem('cartItems');

            // Remove all the cart items from the container
            cartItemsContainer.innerHTML = '';
        });

        // Call the function to render the cart items
        renderCartItems();
    </script>
</body>

</html>